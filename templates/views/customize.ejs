<head>
  <div class="title">
      <title>Customize</title>
  </div>
  <% include ./partials/head %>
</head>

<% include ./partials/header %>

<!-- THIS IS DEPRECATED. NOW IS DONE IN SHOPIFY -->

<!--
<section style="border: none">
	<div class="row">
		<div class="col-sm-5 col-sm-offset-1 col-md-5 col-md-offset-1">
			<img class="img-responsive" src="/images/checkout/kinsu.jpg">
		</div>
		<div class="col-md-5">
			<h2 class="tan-header" style="letter-spacing: 1px">AN ASSORTMENT OF BEER 4 TIMES A YEAR</h2>
			<button id="test-button">CLICK ME</button>

			<div style="font-size:22px">
				<p>Get impossible-to-find craft beer made from homebrew recipes delivered to your door on a quarterly release schedule.</p>
			</div>
			<hr>
			<div style="font-size:22px">
				<ul>
					<li>Every shipment contains:</li>
					<li>22oz bottles of homebrew-inspired beer</li>
					<li>Tasting cards to provide feedback to the homebrewer</li>
					<li>The story behind the recipe creator</li>
				</ul>
			</div>
			<br>
		</div>
	</div>
	<br>
	<br>
	<button id="customize-button" class="btn btn-primary centered-block" >Customize your subscription</button>


	<form>
		<div class="container"  id="customize-flow" style="display: none">
			<br>
			<br>

			<div class="order-selection" id="box-size-choices">
				<h3 style="margin-bottom: 30px">How much beer?</h3>
				<div class="row">
					<div class="col-md-4">
						<div class="box-selection" id="small-box">
							<img src="/images/checkout/4_beers.png">
							<div class="amount-circle"><div class="quantity" id="four">4</div></div>
							<br>
							<p>Four large 22oz bottles of<br>homebrew-inspired beer<br><br>
							Tasting cards to provide feedback to the homebrewer<br>
							<br>
							The story behind the recipe creator</p>
							<br>
						</div>
					</div>
					<div class="col-md-4">
						<div class="box-selection" id="medium-box">
							<img src="/images/checkout/8_beers.png">
							<div class="amount-circle"><div class="quantity" id="eight">8</div></div>
							<br>
							<p>Eight large 22oz bottles of<br>homebrew-inspired beer<br><br>
							Tasting cards to provide feedback to the homebrewer<br>
							<br>
							The story behind the recipe creator</p>
							<br>
						</div>
					</div>
					<div class="col-md-4">
						<div class="box-selection" id="large-box">
							<img src="/images/checkout/12_beers.png">
							<div class="amount-circle"><div class="quantity" id="twelve">12</div></div>
							<br>
							<p>Twelve large 22oz bottles of<br>homebrew-inspired beer<br><br>
							Tasting cards to provide feedback to the homebrewer<br>
							<br>
							The story behind the recipe creator</p>
							<br>
						</div>
					</div>
				</div>

				<button type="submit" class="btn btn-primary" id="continue" style="width: 350px; text-transform: uppercase; letter-spacing: 1px; font-size:22px; margin-top:30px; margin-bottom: 30px; display: none">Continue to checkout</button>
			</div>

		</div>
	</form>
</section>

<% include ./partials/footer %>


<script>
	var smallSubs = 43.96
	var medSubs = 79.92
	var lgSubs = 107.88

	function calculateTotals() {

		 if (localStorage.getItem("box-size") == "small") {

				$('#continue').html("Subscribe for $"+smallSubs);

		 }

		 else if (localStorage.getItem("box-size") == "medium") {

		 	$('#continue').html("Subscribe for $"+medSubs);

		 }

		 else if (localStorage.getItem("box-size") == "large"){

		 	$('#continue').html("Subscribe for $"+lgSubs);

		 }
	}

	$(document).ready(function () {

			$('#customize-button').click(function() {
				$('#customize-flow').fadeIn('slow');
				$('html, body').animate({
				    scrollTop: $("#box-size-choices").offset().top
				}, 1000);
			});

	    $('#test-button').click(function(){
			console.log("hi");
			var data = JSON.stringify({
			  "quantity": 1,
			  "id": 4108657093,
			  "subscription_id": 5385
			});

			var xhr = new XMLHttpRequest();
			xhr.withCredentials = true;

			xhr.addEventListener("readystatechange", function () {
			  if (this.readyState === this.DONE) {
			    console.log(this.responseText);
			  }
			});

			xhr.open("POST", "https://4439f01a1abd6ec2e67c77a0444df99b:cd24b952d3551735eca0bdc27fa66ff5@noblebrewer.myshopify.com/cart/add.js");
			xhr.setRequestHeader("content-type", "application/json");
			xhr.send(data);
		});

	    $('#small-box').click(function () {
	    	$('#small-box').removeClass("inactive-selection");
	    	$("#small-box").css("border", "4px solid green");
	    	$("#four").html("<div style='color: green'>&#10004</div>");

	    	$("#eight").html("8");
	    	$("#twelve").html("12");
	    	$("#medium-box").css("border", "none");
	    	$("#large-box").css("border", "none");
	    	$('#medium-box').addClass("inactive-selection");
	    	$('#large-box').addClass("inactive-selection");


	    	$('#continue').fadeIn('slow');
	    	$('#box-size').val("small");
	    	$('#progressbar').animate({'value':'40'}, 'slow');
	    	$('#progress-value').html('Order process completion 40%');
	    	localStorage.setItem("box-size", "small");

	    	calculateTotals();
	    });

	    $('#medium-box').click(function () {
	    	$('#medium-box').removeClass("inactive-selection");
	    	$("#medium-box").css("border", "4px solid green");
				$("#eight").html("<div style='color: green'>&#10004</div>");

	    	$("#four").html("4");
	    	$("#twelve").html("12");
	    	//unselect the other boxes
	    	$("#small-box").css("border", "none");
	    	$("#large-box").css("border", "none");
	    	$('#small-box').addClass("inactive-selection");
	    	$('#large-box').addClass("inactive-selection");

	    	$('#continue').fadeIn('slow');
	    	$('#box-size').val("medium");
	    	$('#progressbar').animate({'value':'40'}, 'slow');
	    	$('#progress-value').html('Order process completion 40%');
	    	localStorage.setItem("box-size", "medium");

	    	calculateTotals();
	    });

	    $('#large-box').click(function () {
	    	$('#large-box').removeClass("inactive-selection");
	    	$("#large-box").css("border", "4px solid green");
	    	$("#twelve").html("<div style='color: green'>&#10004</div>");

	    	$("#four").html("4");
	    	$("#eight").html("8");

	    	$("#medium-box").css("border", "none");
	    	$("#small-box").css("border", "none");
	    	$('#small-box').addClass("inactive-selection");
	    	$('#medium-box').addClass("inactive-selection");
	    	localStorage.setItem("box-size", "large");

	    	$('#continue').fadeIn('slow');

	    	calculateTotals();
	    });

	});

</script>
