define(["plugin-dependencies","text!./view.html","css!./view.css"],function(e,t){return t=_.template(t,null,{interpolate:/\{\{(.+?)\}\}/g}),Backbone.View.extend({className:"cc-VersionMenu",events:{"click .cc-VersionMenu-cancel":"previewMenuCancel","click .cc-VersionMenu-restore":"previewMenuRestore"},initialize:function(){_.bindAll(this,"render","clearView","setResource","previewMenuRestore","previewMenuCancel")},render:function(){var i=this.model.get("_version"),n=this.model.getVersion(i).created,s=new Date(n);this.$el.html(t({translate:e.translate})),this.$(".cc-VersionMenu-restore").on("click",this.previewMenuRestore),this.$(".cc-VersionMenu-cancel").on("click",this.previewMenuCancel);var r=(e.utils.isToday(n)?"":e.utils.formatMonthDateAndYear(s)+" ")+e.utils.dateTimeAgoText(n);return this.$("h1 b").text(e.translate("Revised {0}",r)),this.delegateEvents(this.events),this},setResource:function(e){this.model=e},clearView:function(){this.remove()},previewMenuRestore:function(e){e.stopPropagation();var t=this;require(["files/dialogs/restore-version/dialog"],function(e){e.setItems([t.model]).show()})},previewMenuCancel:function(){this.model.set("_version",this.model.get("_versionHead")),this.clearView()}})});